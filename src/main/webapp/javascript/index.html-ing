<!DOCTYPE html>
<html lang="nl">
    <head>
        <meta charset="utf-8"/>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <link rel="stylesheet" href="lib/the-guide-styles/css/the-guide-styles-responsive.min.css">

        <!-- bower deps will load here, wiredep will automatically add them from your bower.json  -->
        <!-- bower:js -->
        <script src="lib/jquery/jquery.js"></script>
        <script src="lib/angular/angular.js"></script>
        <script src="lib/angular-cookies/angular-cookies.js"></script>
        <script src="lib/angular-sanitize/angular-sanitize.js"></script>
        <script src="lib/angular-touch/angular-touch.js"></script>
        <script src="lib/angular-resource/angular-resource.js"></script>
        <script src="lib/angular-mocks/angular-mocks.js"></script>
        <script src="lib/spectingular-core/spectingular-core.js"></script>
        <script src="lib/spectingular-components/spectingular-components.js"></script>
        <script src="lib/creditcardsComponents/creditcardsComponents.js"></script>
        <!-- endbower -->

        <!-- App specific libs-->
        <script src="js/pCreditcardsSwitchRepaymentOff.module.js"></script>
        <script src="js/constants.js"></script>
        <!-- App services -->
        <script src="js/services/nextButtonService.js"></script>
        <script src="js/services/properties.js"></script>
        <script src="js/services/progressService.js"></script>
        <script src="js/services/SwitchRepaymentOffService.js"></script>
        <!-- App controllers -->
        <script src="js/controllers/SwitchRepaymentOffNavigatorCtrl.js"></script>
        <script src="js/controllers/Step1Ctrl.js"></script>
        <script src="js/controllers/Step2Ctrl.js"></script>
        <script src="js/controllers/Step3Ctrl.js"></script>

        <!--mocks -->
        <script src="lib/spectingular-mock/js/spectingular-mock.js"></script>
        <script src="lib/angular-mocks/angular-mocks.js"></script>
        <script src="lib/ingmock/js/ingMockE2E.js"></script>

        <script type="text/javascript">
            angular.module('pCreditcardsSwitchRepaymentOffMock',
                           ['pCreditcardsSwitchRepaymentOffApp', 'sp.mock', 'ingMockE2E'])
                    .run(function ($httpBackend, $rootScope, $window) {

                        $httpBackend.whenGET(/.*(\.html|\.htm)$/).passThrough();

                        $httpBackend.scenarioGET('list', '/api/consumer-credit-cards?type=revolving').forward('mocks/list');
                        $httpBackend.scenarioPOST('select', new RegExp('/api/consumer-credit-cards/requests/change-repayment$')).forward('mocks/select');
                        $httpBackend.scenarioPOST('check', new RegExp('/api/consumer-credit-cards/requests/change-repayment/.*/check$')).forward('mocks/check');
                        $httpBackend.scenarioPOST('submit', new RegExp('/api/consumer-credit-cards/requests/change-repayment/.*/submit$')).forward('mocks/submit');
                        $httpBackend.scenarioPOST('reset', new RegExp('/api/consumer-credit-cards/requests/change-repayment/.*/reset')).forward('mocks/reset');

                        // TAN API calls
                        $httpBackend.whenPOST('/api/authorization/validate').respond(200, {'newList': false}, {'content-type': 'application/json'});
                        $httpBackend.whenPOST('/api/authorization/initiate').respond(200, {'means': 'sms', 'challenge': '457ABC'}, {'content-type': 'application/json'});

                        // contact details
                        $httpBackend.scenario({emailpost: 'OK'}, 'POST', '/particulier/ik-en-ing/api/email').respond(200, {},  {'content-type': 'application/json'});
                        $httpBackend.scenarioGET('address', '/particulier/ik-en-ing/api/addresses').forward('mocks/address');

                        var count = 0;
                        $rootScope.$on('$locationChangeSuccess', function () {
                            if (count > 0) {
                                $window.location.reload();
                            }
                            count++;
                        });
                    });

            angular.module('pCreditcardsSwitchRepaymentOffMock').constant('imageRoot', 'img/');
        </script>

    </head>

    <body class="tg" ng-app="pCreditcardsSwitchRepaymentOffMock">
        <div ng-cloak ng-include="'partials/pCreditcardsSwitchRepaymentOff-index.html'"></div>
    </body>
</html>
